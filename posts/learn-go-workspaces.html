<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link type="image/png" sizes="16x16" rel="icon" href="/uol-web-development-final-project/favicon/favicon-16.png"/><link type="image/png" sizes="32x32" rel="icon" href="/uol-web-development-final-project/favicon/favicon-32.png"/><link type="image/png" sizes="96x96" rel="icon" href="/uol-web-development-final-project/favicon/favicon-96.png"/><meta name="description" content="Ilya Amelevich personal blog"/><meta name="og:title" content="Ilya Amelevich personal blog"/><script src="https://kit.fontawesome.com/301fc2a094.js" crossorigin="anonymous" defer=""></script><title>Learn Go: Workspaces</title><meta name="next-head-count" content="7"/><link rel="preload" href="/uol-web-development-final-project/_next/static/css/6cbf7642cb10a6e7.css" as="style"/><link rel="stylesheet" href="/uol-web-development-final-project/_next/static/css/6cbf7642cb10a6e7.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/uol-web-development-final-project/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/uol-web-development-final-project/_next/static/chunks/webpack-bff7b0953f12aa0a.js" defer=""></script><script src="/uol-web-development-final-project/_next/static/chunks/framework-b3ca2e9a9574e304.js" defer=""></script><script src="/uol-web-development-final-project/_next/static/chunks/main-2b4bacc7b6d39292.js" defer=""></script><script src="/uol-web-development-final-project/_next/static/chunks/pages/_app-f318e12dd93cb0ac.js" defer=""></script><script src="/uol-web-development-final-project/_next/static/chunks/709-ae39379dc735afae.js" defer=""></script><script src="/uol-web-development-final-project/_next/static/chunks/255-b053501318921d1a.js" defer=""></script><script src="/uol-web-development-final-project/_next/static/chunks/pages/posts/%5Bid%5D-f321d9e84d39bb24.js" defer=""></script><script src="/uol-web-development-final-project/_next/static/_oKwPuqNXdwnJJuwEOOBA/_buildManifest.js" defer=""></script><script src="/uol-web-development-final-project/_next/static/_oKwPuqNXdwnJJuwEOOBA/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="container max-w-2xl mx-auto md:px-2"><header class="py-8"><div class="flex items-baseline justify-between mx-auto"><a class="text-xl font-bold gradient-link" title="Go to Homepage" href="/uol-web-development-final-project">Ilya Amelevich</a><nav><ul class="flex space-x-6 text-sm font-semibold"><li><a class="gradient-link" href="/uol-web-development-final-project/about">About Me</a></li><li><a class="gradient-link" href="/uol-web-development-final-project/report">Report</a></li><li><a class="gradient-link" href="/uol-web-development-final-project/find-photo">Find free photo</a></li><li><a class="gradient-link" target="_blank" href="https://www.linkedin.com/in/ilya-amelevich-9a8443b6/"><i class="fa-brands fa-linkedin"></i></a></li><li><a class="gradient-link" href="https://github.com/iamelevich"><i class="fa-brands fa-github"></i></a></li></ul></nav></div></header><main><article><h1 class="pb-2 text-3xl font-extrabold leading-tight md:text-4xl">Learn Go: Workspaces</h1><div class="flex flex-row-reverse mb-1"><small>by <a class="text-slate-500 gradient-link" rel="author" target="_blank" href="https://medium.com/@karan99">Karan Pratap Singh</a></small><small class="text-slate-600 mx-1">posted on<!-- --> <a class="text-slate-500 gradient-link" rel="source" target="_blank" href="https://medium.com/@karan99/learn-go-workspaces-3393922d69f1">Medium</a></small><small class="text-slate-600 italic mx-1">In <time dateTime="2022-05-03">May 3, 2022</time></small></div><div class="prose"><p>In this tutorial, we will learn about multi-module workspaces that were introduced in Go 1.18</p>
<p><img src="/uol-web-development-final-project/images/learn-go-workspaces.png" alt="Learn Go: Workspaces"></p>
<p>Workspaces allow us to work with multiple modules simultaneously without having to edit <code>go.mod</code> files for each module. Each module within a workspace is treated as a root module when resolving dependencies.</p>
<p>To understand this better, let’s start by creating a <code>hello</code> module</p>
<pre class="hljs"><code>$ mkdir workspaces &amp;&amp; <span class="hljs-built_in">cd</span> workspaces
$ mkdir hello &amp;&amp; <span class="hljs-built_in">cd</span> hello
$ go mod init hello
</code></pre>
<p>For demonstration purposes, I will add a simple <code>main.go</code> and install an example package.</p>
<pre class="hljs"><code><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">&quot;fmt&quot;</span>	<span class="hljs-string">&quot;golang.org/x/example/stringutil&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	result := stringutil.Reverse(<span class="hljs-string">&quot;Hello Workspace&quot;</span>)
	fmt.Println(result)
}
</code></pre>
<pre class="hljs"><code>$ go get golang.org/x/example
go: downloading golang.org/x/example v0.0.0-20220412213650-2e68773dfca0
go: added golang.org/x/example v0.0.0-20220412213650-2e68773dfca0
</code></pre>
<p>And if we run this, we should see our output in reverse.</p>
<pre class="hljs"><code>$ go run main.go
ecapskroW olleH
</code></pre>
<p>This is great, but what if we want to modify the <code>stringutil</code> module that our code depends on?</p>
<p>Until now we had to do it using the <code>replace</code> directive in the <code>go.mod</code> file, but now let’s see how we can use workspaces here.</p>
<p>So let’s create our workspace in the <code>workspace</code> directory</p>
<pre class="hljs"><code>$ go work init
</code></pre>
<p>This will create a <code>go.work</code> file</p>
<pre class="hljs"><code>$ cat go.work
go 1.18
</code></pre>
<p>We will also add our <code>hello</code> module to the workspace.</p>
<pre class="hljs"><code>$ go work use ./hello
</code></pre>
<p>This should update the <code>go.work</code> file with a reference to our <code>hello</code> module</p>
<pre class="hljs"><code><span class="hljs-keyword">go</span> <span class="hljs-number">1.18</span>

use ./hello
</code></pre>
<p>Now let’s download and modify the <code>stringutil</code> package and update the Reverse function implementation</p>
<pre class="hljs"><code>$ git <span class="hljs-built_in">clone</span> https://go.googlesource.com/example
Cloning into <span class="hljs-string">&#x27;example&#x27;</span>...
remote: Total 204 (delta 39), reused 204 (delta 39)
Receiving objects: 100% (204/204), 467.53 KiB | 363.00 KiB/s, <span class="hljs-keyword">done</span>.
Resolving deltas: 100% (39/39), <span class="hljs-keyword">done</span>.
</code></pre>
<p><code>example/stringutil/reverse.go</code></p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Reverse</span><span class="hljs-params">(s <span class="hljs-keyword">string</span>)</span> <span class="hljs-title">string</span></span> {
	<span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">&quot;I can do whatever!! %s&quot;</span>, s)
}
</code></pre>
<p>Finally, let’s add <code>example</code> package to our workspace</p>
<pre class="hljs"><code>$ go work use ./example
$ cat go.work
go 1.18use (
	./example
	./hello
)
</code></pre>
<p>Perfect, now if we run our <code>hello</code> module we will notice that the <code>Reverse</code> function has been modified.</p>
<pre class="hljs"><code>$ go run hello
I can <span class="hljs-keyword">do</span> whatever!! Hello Workspace
</code></pre>
<blockquote>
<p>This is a very underrated feature from Go 1.18 but it is quite useful in certain circumstances.</p>
</blockquote>
<p>So this is pretty much it for workspaces in Go, I’ll see you in the next tutorial.</p>
<blockquote>
<p>Originally published at <a href="https://www.karanpratapsingh.com">https://www.karanpratapsingh.com</a> on May 4, 2022.</p>
</blockquote>
</div></article></main><div class="my-6"><a class="gradient-link" href="/uol-web-development-final-project">← Back to home</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"learn-go-workspaces","contentHtml":"\u003cp\u003eIn this tutorial, we will learn about multi-module workspaces that were introduced in Go 1.18\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/learn-go-workspaces.png\" alt=\"Learn Go: Workspaces\"\u003e\u003c/p\u003e\n\u003cp\u003eWorkspaces allow us to work with multiple modules simultaneously without having to edit \u003ccode\u003ego.mod\u003c/code\u003e files for each module. Each module within a workspace is treated as a root module when resolving dependencies.\u003c/p\u003e\n\u003cp\u003eTo understand this better, let’s start by creating a \u003ccode\u003ehello\u003c/code\u003e module\u003c/p\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e$ mkdir workspaces \u0026amp;\u0026amp; \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e workspaces\n$ mkdir hello \u0026amp;\u0026amp; \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e hello\n$ go mod init hello\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFor demonstration purposes, I will add a simple \u003ccode\u003emain.go\u003c/code\u003e and install an example package.\u003c/p\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e\u003cspan class=\"hljs-keyword\"\u003epackage\u003c/span\u003e main\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e (\n\t\u003cspan class=\"hljs-string\"\u003e\u0026quot;fmt\u0026quot;\u003c/span\u003e\t\u003cspan class=\"hljs-string\"\u003e\u0026quot;golang.org/x/example/stringutil\u0026quot;\u003c/span\u003e\n)\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003emain\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n\tresult := stringutil.Reverse(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello Workspace\u0026quot;\u003c/span\u003e)\n\tfmt.Println(result)\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e$ go get golang.org/x/example\ngo: downloading golang.org/x/example v0.0.0-20220412213650-2e68773dfca0\ngo: added golang.org/x/example v0.0.0-20220412213650-2e68773dfca0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd if we run this, we should see our output in reverse.\u003c/p\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e$ go run main.go\necapskroW olleH\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis is great, but what if we want to modify the \u003ccode\u003estringutil\u003c/code\u003e module that our code depends on?\u003c/p\u003e\n\u003cp\u003eUntil now we had to do it using the \u003ccode\u003ereplace\u003c/code\u003e directive in the \u003ccode\u003ego.mod\u003c/code\u003e file, but now let’s see how we can use workspaces here.\u003c/p\u003e\n\u003cp\u003eSo let’s create our workspace in the \u003ccode\u003eworkspace\u003c/code\u003e directory\u003c/p\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e$ go work init\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis will create a \u003ccode\u003ego.work\u003c/code\u003e file\u003c/p\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e$ cat go.work\ngo 1.18\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe will also add our \u003ccode\u003ehello\u003c/code\u003e module to the workspace.\u003c/p\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e$ go work use ./hello\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis should update the \u003ccode\u003ego.work\u003c/code\u003e file with a reference to our \u003ccode\u003ehello\u003c/code\u003e module\u003c/p\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e\u003cspan class=\"hljs-keyword\"\u003ego\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1.18\u003c/span\u003e\n\nuse ./hello\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow let’s download and modify the \u003ccode\u003estringutil\u003c/code\u003e package and update the Reverse function implementation\u003c/p\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e$ git \u003cspan class=\"hljs-built_in\"\u003eclone\u003c/span\u003e https://go.googlesource.com/example\nCloning into \u003cspan class=\"hljs-string\"\u003e\u0026#x27;example\u0026#x27;\u003c/span\u003e...\nremote: Total 204 (delta 39), reused 204 (delta 39)\nReceiving objects: 100% (204/204), 467.53 KiB | 363.00 KiB/s, \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e.\nResolving deltas: 100% (39/39), \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eexample/stringutil/reverse.go\u003c/code\u003e\u003c/p\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eReverse\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(s \u003cspan class=\"hljs-keyword\"\u003estring\u003c/span\u003e)\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estring\u003c/span\u003e\u003c/span\u003e {\n\t\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e fmt.Sprintf(\u003cspan class=\"hljs-string\"\u003e\u0026quot;I can do whatever!! %s\u0026quot;\u003c/span\u003e, s)\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFinally, let’s add \u003ccode\u003eexample\u003c/code\u003e package to our workspace\u003c/p\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e$ go work use ./example\n$ cat go.work\ngo 1.18use (\n\t./example\n\t./hello\n)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ePerfect, now if we run our \u003ccode\u003ehello\u003c/code\u003e module we will notice that the \u003ccode\u003eReverse\u003c/code\u003e function has been modified.\u003c/p\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e$ go run hello\nI can \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e whatever!! Hello Workspace\n\u003c/code\u003e\u003c/pre\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThis is a very underrated feature from Go 1.18 but it is quite useful in certain circumstances.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eSo this is pretty much it for workspaces in Go, I’ll see you in the next tutorial.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOriginally published at \u003ca href=\"https://www.karanpratapsingh.com\"\u003ehttps://www.karanpratapsingh.com\u003c/a\u003e on May 4, 2022.\u003c/p\u003e\n\u003c/blockquote\u003e\n","title":"Learn Go: Workspaces","date":"2022-05-03","authorName":"Karan Pratap Singh","authorLink":"https://medium.com/@karan99","source":"https://medium.com/@karan99/learn-go-workspaces-3393922d69f1","sourceName":"Medium","image":"/images/learn-go-workspaces.png"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"learn-go-workspaces"},"buildId":"_oKwPuqNXdwnJJuwEOOBA","assetPrefix":"/uol-web-development-final-project","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>